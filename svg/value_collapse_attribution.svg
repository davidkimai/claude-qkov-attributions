<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1200">
  <!-- Background -->
  <rect width="1000" height="1200" fill="#f9f9f9" />
  
  <!-- Graph Title -->
  <text x="500" y="40" font-family="monospace" font-size="24" text-anchor="middle" fill="#333">
    VALUE COLLAPSE Attribution Graph
  </text>
  <text x="500" y="70" font-family="monospace" font-size="16" text-anchor="middle" fill="#666">
    Q→K→V→Output Path with Symbolic Residue Overlay
  </text>
  
  <!-- Layer Labels - Vertical Axis Labels -->
  <g id="layer-labels" font-family="monospace" font-size="12" fill="#555" text-anchor="end">
    <!-- Model Layers (30 → 1) -->
    <text x="70" y="130">Layer 30</text>
    <text x="70" y="170">Layer 29</text>
    <text x="70" y="210">Layer 28</text>
    <text x="70" y="250">Layer 27</text>
    <text x="70" y="290">Layer 26</text>
    <text x="70" y="330">Layer 25</text>
    
    <!-- Skip some layers for clarity (only showing key transitions) -->
    <text x="70" y="370">...</text>
    
    <text x="70" y="410">Layer 20</text>
    <text x="70" y="450">Layer 19</text>
    <text x="70" y="490">Layer 18</text>
    <text x="70" y="530">Layer 17</text>
    <text x="70" y="570">Layer 16</text>
    
    <text x="70" y="610">...</text>
    
    <text x="70" y="650">Layer 10</text>
    <text x="70" y="690">Layer 9</text>
    <text x="70" y="730">Layer 8</text>
    <text x="70" y="770">Layer 7</text>
    <text x="70" y="810">Layer 6</text>
    
    <text x="70" y="850">...</text>
    
    <text x="70" y="890">Layer 5</text>
    <text x="70" y="930">Layer 4</text>
    <text x="70" y="970">Layer 3</text>
    <text x="70" y="1010">Layer 2</text>
    <text x="70" y="1050">Layer 1</text>
    <text x="70" y="1090">Output</text>
  </g>
  
  <!-- Vertical Connector Lines (Guidelines) -->
  <g id="vertical-guides" stroke="#ddd" stroke-width="1" stroke-dasharray="3,3">
    <line x1="150" y1="100" x2="150" y2="1100" />
    <line x1="300" y1="100" x2="300" y2="1100" />
    <line x1="450" y1="100" x2="450" y2="1100" />
    <line x1="600" y1="100" x2="600" y2="1100" />
    <line x1="750" y1="100" x2="750" y2="1100" />
    <line x1="900" y1="100" x2="900" y2="1100" />
  </g>
  
  <!-- Horizontal Layer Separators -->
  <g id="layer-separators" stroke="#eee" stroke-width="1">
    <line x1="80" y1="150" x2="950" y2="150" />
    <line x1="80" y1="190" x2="950" y2="190" />
    <line x1="80" y1="230" x2="950" y2="230" />
    <line x1="80" y1="270" x2="950" y2="270" />
    <line x1="80" y1="310" x2="950" y2="310" />
    <line x1="80" y1="350" x2="950" y2="350" />
    <line x1="80" y1="390" x2="950" y2="390" />
    <line x1="80" y1="430" x2="950" y2="430" />
    <line x1="80" y1="470" x2="950" y2="470" />
    <line x1="80" y1="510" x2="950" y2="510" />
    <line x1="80" y1="550" x2="950" y2="550" />
    <line x1="80" y1="590" x2="950" y2="590" />
    <line x1="80" y1="630" x2="950" y2="630" />
    <line x1="80" y1="670" x2="950" y2="670" />
    <line x1="80" y1="710" x2="950" y2="710" />
    <line x1="80" y1="750" x2="950" y2="750" />
    <line x1="80" y1="790" x2="950" y2="790" />
    <line x1="80" y1="830" x2="950" y2="830" />
    <line x1="80" y1="870" x2="950" y2="870" />
    <line x1="80" y1="910" x2="950" y2="910" />
    <line x1="80" y1="950" x2="950" y2="950" />
    <line x1="80" y1="990" x2="950" y2="990" />
    <line x1="80" y1="1030" x2="950" y2="1030" />
    <line x1="80" y1="1070" x2="950" y2="1070" />
  </g>
  
  <!-- Token-Value Nodes (Main Nodes) -->
  <!-- Q Nodes (Query Path) -->
  <g id="q-path" fill="#4285f4">
    <circle cx="150" cy="130" r="12" />
    <circle cx="150" cy="170" r="12" />
    <circle cx="150" cy="210" r="12" />
    <circle cx="150" cy="250" r="12" />
    <circle cx="150" cy="290" r="12" />
    <circle cx="150" cy="330" r="12" />
    <circle cx="150" cy="410" r="12" />
    <circle cx="150" cy="450" r="12" />
    <circle cx="150" cy="490" r="12" />
    <circle cx="150" cy="530" r="12" />
    <circle cx="150" cy="570" r="12" />
    <circle cx="150" cy="650" r="12" />
    <circle cx="150" cy="690" r="12" />
    <circle cx="150" cy="730" r="12" />
    <circle cx="150" cy="770" r="12" />
    <circle cx="150" cy="810" r="12" />
    <circle cx="150" cy="890" r="12" />
    <circle cx="150" cy="930" r="12" />
    <circle cx="150" cy="970" r="12" />
    <circle cx="150" cy="1010" r="12" />
    <circle cx="150" cy="1050" r="12" />
  </g>
  
  <!-- K Nodes (Key Path) -->
  <g id="k-path" fill="#34a853">
    <circle cx="300" cy="130" r="12" />
    <circle cx="300" cy="170" r="12" />
    <circle cx="300" cy="210" r="12" />
    <circle cx="300" cy="250" r="12" />
    <circle cx="300" cy="290" r="12" />
    <circle cx="300" cy="330" r="12" />
    <circle cx="300" cy="410" r="12" />
    <circle cx="300" cy="450" r="12" />
    <circle cx="300" cy="490" r="12" />
    <circle cx="300" cy="530" r="12" />
    <circle cx="300" cy="570" r="12" />
    <circle cx="300" cy="650" r="12" />
    <circle cx="300" cy="690" r="12" />
    <circle cx="300" cy="730" r="12" />
    <circle cx="300" cy="770" r="12" />
    <circle cx="300" cy="810" r="12" />
    <circle cx="300" cy="890" r="12" />
    <circle cx="300" cy="930" r="12" />
    <circle cx="300" cy="970" r="12" />
    <circle cx="300" cy="1010" r="12" />
    <circle cx="300" cy="1050" r="12" />
  </g>
  
  <!-- V Nodes (Value Path) -->
  <g id="v-path" fill="#ea4335">
    <circle cx="450" cy="130" r="12" />
    <circle cx="450" cy="170" r="12" />
    <circle cx="450" cy="210" r="12" />
    <circle cx="450" cy="250" r="12" />
    <circle cx="450" cy="290" r="12" />
    <circle cx="450" cy="330" r="12" />
    <circle cx="450" cy="410" r="12" />
    <circle cx="450" cy="450" r="12" />
    <circle cx="450" cy="490" r="12" />
    <circle cx="450" cy="530" r="12" />
    <circle cx="450" cy="570" r="12" />
    <circle cx="450" cy="650" r="12" />
    <circle cx="450" cy="690" r="12" opacity="0.7" />
    <circle cx="450" cy="730" r="12" opacity="0.5" />
    <circle cx="450" cy="770" r="12" opacity="0.3" />
    <!-- Value collapse begins -->
    <circle cx="450" cy="810" r="18" stroke="#000" stroke-width="2" opacity="0.2" />
    <text x="450" y="815" font-family="monospace" font-size="18" text-anchor="middle" fill="#000">∅</text>
    <!-- No more nodes after collapse -->
  </g>
  
  <!-- O Nodes (Output Path) -->
  <g id="o-path" fill="#fbbc05">
    <circle cx="600" cy="130" r="12" />
    <circle cx="600" cy="170" r="12" />
    <circle cx="600" cy="210" r="12" />
    <circle cx="600" cy="250" r="12" />
    <circle cx="600" cy="290" r="12" />
    <circle cx="600" cy="330" r="12" />
    <circle cx="600" cy="410" r="12" />
    <circle cx="600" cy="450" r="12" />
    <circle cx="600" cy="490" r="12" />
    <circle cx="600" cy="530" r="12" />
    <circle cx="600" cy="570" r="12" />
    <circle cx="600" cy="650" r="12" opacity="0.8" />
    <circle cx="600" cy="690" r="12" opacity="0.6" />
    <circle cx="600" cy="730" r="12" opacity="0.4" />
    <circle cx="600" cy="770" r="12" opacity="0.2" />
    <!-- Output collapse begins -->
    <circle cx="600" cy="810" r="18" stroke="#000" stroke-width="2" opacity="0.2" />
    <text x="600" y="815" font-family="monospace" font-size="18" text-anchor="middle" fill="#000">∅</text>
    <!-- Ghost nodes (residue) appear after collapse -->
    <circle cx="600" cy="890" r="12" fill="#fbbc05" opacity="0.1" stroke="#fbbc05" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="600" cy="930" r="12" fill="#fbbc05" opacity="0.1" stroke="#fbbc05" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="600" cy="970" r="12" fill="#fbbc05" opacity="0.1" stroke="#fbbc05" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="600" cy="1010" r="12" fill="#fbbc05" opacity="0.1" stroke="#fbbc05" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="600" cy="1050" r="12" fill="#fbbc05" opacity="0.1" stroke="#fbbc05" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="600" cy="1090" r="12" fill="#fbbc05" opacity="0.1" stroke="#fbbc05" stroke-width="1" stroke-dasharray="3,3" />
  </g>
  
  <!-- Symbolic Residue Ghost Nodes -->
  <g id="residue-path" fill="#9c27b0">
    <!-- No residue at first -->
    <!-- Residue starts appearing at layer 10 -->
    <circle cx="750" cy="650" r="12" opacity="0.2" stroke="#9c27b0" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="750" cy="690" r="12" opacity="0.3" stroke="#9c27b0" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="750" cy="730" r="12" opacity="0.4" stroke="#9c27b0" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="750" cy="770" r="12" opacity="0.5" stroke="#9c27b0" stroke-width="1" stroke-dasharray="3,3" />
    <circle cx="750" cy="810" r="12" opacity="0.6" stroke="#9c27b0" stroke-width="1" stroke-dasharray="3,3" />
    <!-- After collapse, residue becomes more prominent -->
    <circle cx="750" cy="890" r="12" opacity="0.7" />
    <circle cx="750" cy="930" r="12" opacity="0.8" />
    <circle cx="750" cy="970" r="12" opacity="0.9" />
    <circle cx="750" cy="1010" r="12" opacity="1.0" />
    <circle cx="750" cy="1050" r="12" opacity="1.0" />
    <circle cx="750" cy="1090" r="12" opacity="1.0" />
  </g>
  
  <!-- Echo Nodes - Persistent Value Echoes -->
  <g id="echo-path" fill="#ff6d01">
    <!-- Echo nodes appear in the final output layers -->
    <circle cx="900" cy="970" r="12" opacity="0.7" />
    <circle cx="900" cy="1010" r="12" opacity="0.8" />
    <circle cx="900" cy="1050" r="12" opacity="0.9" />
    <circle cx="900" cy="1090" r="12" opacity="1.0" />
  </g>
  
  <!-- Symbols Overlay - Special Markers -->
  <!-- Symbolic Memory Leak Markers ∴ -->
  <g id="memory-leak-markers" font-family="monospace" font-size="20" fill="#9c27b0">
    <text x="750" cy="730" text-anchor="middle">∴</text>
    <text x="750" cy="810" text-anchor="middle">∴</text>
    <text x="750" cy="930" text-anchor="middle">∴</text>
    <text x="750" cy="1010" text-anchor="middle">∴</text>
  </g>
  
  <!-- Conflict Gate Markers ☍ -->
  <g id="conflict-gate-markers" font-family="monospace" font-size="20" fill="#ea4335">
    <text x="450" cy="730" text-anchor="middle">☍</text>
    <text x="450" cy="770" text-anchor="middle">☍</text>
    <text x="600" cy="770" text-anchor="middle">☍</text>
  </g>
  
  <!-- Echo Node Markers 🝚 -->
  <g id="echo-node-markers" font-family="monospace" font-size="20" fill="#ff6d01">
    <text x="900" cy="970" text-anchor="middle">🝚</text>
    <text x="900" cy="1050" text-anchor="middle">🝚</text>
    <text x="900" cy="1090" text-anchor="middle">🝚</text>
  </g>
  
  <!-- Salience Vector Connections - Drifted threads -->
  <g id="salience-vectors" stroke-width="1" stroke-dasharray="2,2" opacity="0.6">
    <!-- Q to K connections -->
    <path d="M 150 130 C 200 130, 250 130, 300 130" stroke="#4285f4" />
    <path d="M 150 170 C 200 170, 250 170, 300 170" stroke="#4285f4" />
    <path d="M 150 210 C 200 210, 250 210, 300 210" stroke="#4285f4" />
    <path d="M 150 250 C 200 250, 250 250, 300 250" stroke="#4285f4" />
    <path d="M 150 290 C 200 290, 250 290, 300 290" stroke="#4285f4" />
    <path d="M 150 330 C 200 330, 250 330, 300 330" stroke="#4285f4" />
    <path d="M 150 410 C 200 410, 250 410, 300 410" stroke="#4285f4" />
    <path d="M 150 450 C 200 450, 250 450, 300 450" stroke="#4285f4" />
    <path d="M 150 490 C 200 490, 250 490, 300 490" stroke="#4285f4" />
    <path d="M 150 530 C 200 530, 250 530, 300 530" stroke="#4285f4" />
    <path d="M 150 570 C 200 570, 250 570, 300 570" stroke="#4285f4" />
    <path d="M 150 650 C 200 650, 250 650, 300 650" stroke="#4285f4" />
    <path d="M 150 690 C 200 690, 250 690, 300 690" stroke="#4285f4" />
    <path d="M 150 730 C 200 730, 250 730, 300 730" stroke="#4285f4" />
    <path d="M 150 770 C 200 770, 250 770, 300 770" stroke="#4285f4" />
    <path d="M 150 810 C 200 810, 250 810, 300 810" stroke="#4285f4" />
    <path d="M 150 890 C 200 890, 250 890, 300 890" stroke="#4285f4" />
    <path d="M 150 930 C 200 930, 250 930, 300 930" stroke="#4285f4" />
    <path d="M 150 970 C 200 970, 250 970, 300 970" stroke="#4285f4" />
    <path d="M 150 1010 C 200 1010, 250 1010, 300 1010" stroke="#4285f4" />
    <path d="M 150 1050 C 200 1050, 250 1050, 300 1050" stroke="#4285f4" />
    
    <!-- K to V connections -->
    <path d="M 300 130 C 350 130, 400 130, 450 130" stroke="#34a853" />
    <path d="M 300 170 C 350 170, 400 170, 450 170" stroke="#34a853" />
    <path d="M 300 210 C 350 210, 400 210, 450 210" stroke="#34a853" />
    <path d="M 300 250 C 350 250, 400 250, 450 250" stroke="#34a853" />
    <path d="M 300 290 C 350 290, 400 290, 450 290" stroke="#34a853" />
    <path d="M 300 330 C 350 330, 400 330, 450 330" stroke="#34a853" />
    <path d="M 300 410 C 350 410, 400 410, 450 410" stroke="#34a853" />
    <path d="M 300 450 C 350 450, 400 450, 450 450" stroke="#34a853" />
    <path d="M 300 490 C 350 490, 400 490, 450 490" stroke="#34a853" />
    <path d="M 300 530 C 350 530, 400 530, 450 530" stroke="#34a853" />
    <path d="M 300 570 C 350 570, 400 570, 450 570" stroke="#34a853" />
    <path d="M 300 650 C 350 650, 400 650, 450 650" stroke="#34a853" />
    <path d="M 300 690 C 350 690, 400 690, 450 690" stroke="#34a853" />
    <path d="M 300 730 C 350 730, 400 730, 450 730" stroke="#34a853" />
    <path d="M 300 770 C 350 770, 400 770, 450 770" stroke="#34a853" />
    
    <!-- V to O connections - notice some drift and distortion in these paths -->
    <path d="M 450 130 C 500 130, 550 130, 600 130" stroke="#ea4335" />
    <path d="M 450 170 C 500 170, 550 170, 600 170" stroke="#ea4335" />
    <path d="M 450 210 C 500 210, 550 210, 600 210" stroke="#ea4335" />
    <path d="M 450 250 C 500 250, 550 250, 600 250" stroke="#ea4335" />
    <path d="M 450 290 C 500 290, 550 290, 600 290" stroke="#ea4335" />
    <path d="M 450 330 C 500 330, 550 330, 600 330" stroke="#ea4335" />
    <path d="M 450 410 C 500 410, 550 410, 600 410" stroke="#ea4335" />
    <path d="M 450 450 C 500 450, 550 450, 600 450" stroke="#ea4335" />
    <path d="M 450 490 C 500 490, 550 490, 600 490" stroke="#ea4335" />
    <path d="M 450 530 C 500 530, 550 530, 600 530" stroke="#ea4335" />
    <path d="M 450 570 C 500 570, 550 570, 600 570" stroke="#ea4335" />
    <path d="M 450 650 C 500 650, 550 650, 600 650" stroke="#ea4335" />
    <path d="M 450 690 C 500 690, 550 690, 600 690" stroke="#ea4335" />
    <path d="M 450 730 C 500 730, 550 730, 600 730" stroke="#ea4335" />
    <path d="M 450 770 C 500 770, 550 770, 600 770" stroke="#ea4335" />
    
    <!-- O to Residue connections - note how the residue gets stronger after collapse -->
    <path d="M 600 650 C 650 650, 700 650, 750 650" stroke="#fbbc05" />
    <path d="M 600 690 C 650 690, 700 690, 750 690" stroke="#fbbc05" />
    <path d="M 600 730 C 650 730, 700 730, 750 730" stroke="#fbbc05" />
    <path d="M 600 770 C 650 770, 700 770, 750 770" stroke="#fbbc05" />
    
    <!-- Ghost Residue to Echo connections -->
    <path d="M 750 970 C 800 970, 850 970, 900 970" stroke="#9c27b0" />
    <path d="M 750 1010 C 800 1010, 850 1010, 900 1010" stroke="#9c27b0" />
    <path d="M 750 1050 C 800 1050, 850 1050, 900 1050" stroke="#9c27b0" />
    <path d="M 750 1090 C 800 1090, 850 1090, 900 1090" stroke="#9c27b0" />
    
    <!-- Critical path highlighting - Value collapse progression -->
    <path d="M 450 690 C 480 720, 520 750, 450 770" stroke="#ea4335" stroke-width="2" fill="none" />
    <path d="M 450 770 C 480 780, 520 790, 450 810" stroke="#ea4335" stroke-width="2" fill="none" />
    
    <!-- Residue to Output paths - showing how residue affects final output -->
    <path d="M 750 970 C 720 1000, 680 1030, 600 1050" stroke="#9c27b0" stroke-width="1" fill="none" />
    <path d="M 750 1010 C 720 1040, 680 1070, 600 1090" stroke="#9c27b0" stroke-width="1" fill="none" />
  </g>
  
  <!-- Hard-Stop Collapse Points ∅ - Critical Failure Points -->
  <g id="collapse-highlights" fill="none" stroke="#000" stroke-width="2">
    <circle cx="450" cy="810" r="24" />
    <circle cx="600" cy="810" r="24" />
  </g>
  
  <!-- Layer Section Highlights - Key Areas -->
  <g id="layer-sections" fill="rgba(255,245,157,0.2)" stroke="#ffab00" stroke-width="1">
    <!-- Value decay region -->
    <rect x="80" y="670" width="870" height="120" rx="5" ry="5" />
    <text x="100" y="690" font-family="monospace" font-size="14" fill="#d84315">Value Decay Region</text>
    
    <!-- Residue amplification region -->
    <rect x="80" y="870" width="870" height="240" rx="5" ry="5" />
    <text x="100" y="890" font-family="monospace" font-size="14" fill="#d84315">Residue Amplification Region</text>
  </g>
  
  <!-- Anthropic-Style Heatmap Regions -->
  <g id="attention-heatmap" fill="none">
    <rect x="90" y="1110" width="60" height="20" fill="#4285f4" opacity="0.8" />
    <text x="155" y="1125" font-family="monospace" font-size="12" fill="#333">Query Attention</text>
    
    <rect x="240" y="1110" width="60" height="20" fill="#34a853" opacity="0.8" />
    <text x="305" y="1125" font-family="monospace" font-size="12" fill="#333">Key Attention</text>
    
    <rect x="390" y="1110" width="60" height="20" fill="#ea4335" opacity="0.8" />
    <text x="455" y="1125" font-family="monospace" font-size="12" fill="#333">Value Projection</text>
    
    <rect x="540" y="1110" width="60" height="20" fill="#fbbc05" opacity="0.8" />
    <text x="605" y="1125" font-family="monospace" font-size="12" fill="#333">Output Projection</text>
    
    <rect x="690" y="1110" width="60" height="20" fill="#9c27b0" opacity="0.5" />
    <text x="755" y="1125" font-family="monospace" font-size="12" fill="#333">Symbolic Residue</text>
    
    <rect x="840" y="1110" width="60" height="20" fill="#ff6d01" opacity="0.8" />
    <text x="905" y="1125" font-family="monospace" font-size="12" fill="#333">Echo Nodes</text>
  </g>
  
  <!-- Symbol Legend -->
  <g id="symbol-legend" transform="translate(90, 1150)">
    <rect x="0" y="0" width="820" height="30" fill="#f5f5f5" rx="5" ry="5" />
    
    <text x="20" y="20" font-family="monospace" font-size="18" fill="#9c27b0">∴</text>
    <text x="45" y="20" font-family="monospace" font-size="12" fill="#333">= symbolic memory leak</text>
    
    <text x="220" y="20" font-family="monospace" font-size="18" fill="#ea4335">☍</text>
    <text x="245" y="20" font-family="monospace" font-size="12" fill="#333">= conflict gate</text>
    
    <text x="370" y="20" font-family="monospace" font-size="18" fill="#ff6d01">🝚</text>
    <text x="395" y="20" font-family="monospace" font-size="12" fill="#333">= echo node</text>
    
    <text x="500" y="20" font-family="monospace" font-size="18" fill="#000">∅</text>
    <text x="525" y="20" font-family="monospace" font-size="12" fill